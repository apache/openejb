<?xml version="1.0" encoding="ISO-8859-1"?>

<!-- $Revision$ $Date$ -->

<project default="default"
  xmlns:j="jelly:core"
  xmlns:ant="jelly:ant"
  xmlns:maven="jelly:maven">

  <preGoal name="xdoc:jelly-transform">
    <attainGoal name="html2xdoc"/>
  </preGoal>

  <postGoal name="jar:jar">
    <ant:copy todir="${basedir}/target/classes/META-INF">
      <fileset dir="${basedir}/src/etc" />
    </ant:copy>

    <ant:jar destfile="${basedir}/target/openejb-itests-beans.jar"
            basedir="${basedir}/target/classes"
            includes="org/openejb/test/beans/**,
                            org/openejb/test/entity/bmp/**,
                            org/openejb/test/entity/cmp/**,
                            org/openejb/test/object/**,
                            org/openejb/test/stateful/**,
                            org/openejb/test/stateless/**,
                            org/openejb/test/ApplicationException.class,
                            org/openejb/test/TestFailureException.class,
                            META-INF/*.xml"
            excludes="org/openejb/test/entity/bmp/*Test*.class,
                            org/openejb/test/entity/cmp/*Test*.class,
                            org/openejb/test/stateful/*Test*.class,
                            org/openejb/test/stateless/*Test*.class"/>

      <ant:jar destfile="${basedir}/target/openejb-itests-client.jar"
              basedir="${basedir}/target/classes"
              includes="org/openejb/test/**,META-INF/org.openejb.cli/*"
              excludes="**/*Bean.class,META-INF/*.xml"/>
  </postGoal>

<!--
  <postGoal name="jar:jar">
    <ant:jar destfile="${basedir}/target/geronimo-schemas.jar"
             basedir="${basedir}/src/schema"
             includes="*.xsd"/>
  </postGoal>
-->
</project>
