<?xml version="1.0"?>
<!-- $Id$ -->
<document>
  
  <properties>
    <title>OpenEJB Configuration</title>
    <sub-title>Stateful SessionBean Containers</sub-title>
  </properties>
  
<body>

<section title="Declaring your Container" ref-id="declare">
<p>
Stateful SessionBean containers are defined using a &lt;Container&gt; element 
with the <b>ctype</b> attribute set to <b>STATEFUL</b>.
</p>
</section>
<section title="STATEFUL properties" ref-id="properties">
  <p>
  All Stateful SessionBean containers have the following properties 
which you can override.  If a property is not overridden, then the 
default value is used.
  </p>
  <section title="Passivator" ref-id="STATEFUL.Passivator">
    <p>
The passivator is responsible for writing beans to disk 
at passivation time. Different passivators can be used 
by setting this property to the fully qualified class name
of the PassivationStrategy implementation. The passivator
is not responsible for invoking any callbacks or other 
processing, its only responsibly is to write the bean state
to disk.
    </p>
    
    <p>
<ul>Known implementations:
<li>org.openejb.core.stateful.RAFPassivater</li>
<li>org.openejb.core.stateful.SimplePassivater</li>
</ul>
    </p>
    <p>
    Default:
    <code-block>Passivator   org.openejb.core.stateful.SimplePassivater</code-block>
    </p>
    </section>
    <section title="TimeOut" ref-id="STATEFUL.TimeOut">
    <p>
Specifies the time to wait between invocations. This 
value is measured in minutes.  A value of 5 would 
result in a time-out of 5 minutes between invocations.
    </p>
    <p>
    Default:
    <code-block>TimeOut  20</code-block>
    </p>
    </section>
    <section title="PoolSize" ref-id="STATEFUL.PoolSize">
    <p>
Specifies the size of the bean pools for this 
stateful SessionBean container.
    </p>
    <p>
    Default:
    <code-block>PoolSize  100</code-block>
    </p>
    </section>
    <section title="BulkPassivate" ref-id="STATEFUL.BulkPassivate">
    <p>
Property name that specifies the number of instances
to passivate at one time when doing bulk passivation.
Must be less than the PoolSize.
    </p>
    <p>
    Default:
    <code-block>BulkPassivate  50</code-block>
    </p>
    </section>
</section>

<section title="Examples" ref-id="examples">
<section title="Basic Default" ref-id="example.default">
  <p>
Here is an OpenEJB config with a Stateful SessionBean Container using all
the default values.
  </p>
<p>
<file name="openejb.conf"><![CDATA[
<?xml version="1.0"?>
<openejb>

<Container id="My Stateful Container" ctype="STATEFUL"/>

</openejb>
]]></file>
</p> 
</section>


<section title="Multiple Containers" ref-id="example.multiple">
<p>
It may help application or team organization to define more than one Stateful 
SessionBean container in your openejb.conf file and name then accordingly.
</p>
<p>
<file name="openejb.conf"><![CDATA[
<?xml version="1.0"?>
<openejb>

<Container id="Banking App Container" ctype="STATEFUL"/>

<Container id="Mortgage App Container" ctype="STATEFUL"/>

</openejb>
]]></file>
</p>
</section>

<section title="Overriding Properties" ref-id="example.properties">
<p>
Anytime you want to change the way the container manages the beans 
it runs, you simply need to override the corresponding property.
</p>
<p>
Here is an example of one Stateful Container with the timeout set 
to 20 minutes and another with it's timeout set to 9 hours and poolsize 
set to 200.
</p>
<p>
<file name="openejb.conf"><![CDATA[
<?xml version="1.0"?>
<openejb>

<Container id="Banking App Container" ctype="STATEFUL">
    TimeOut   20
</Container>

<Container id="Mortgage App Container" ctype="STATEFUL"/>
    TimeOut   540
    PoolSize  200
</Container>

</openejb>
]]></file>
</p>
</section>
</section>
</body>
</document>
